<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bonus Poker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
            color: #fff;
        }
        #gameContainer {
            background: linear-gradient(145deg, #1a1a2e, #16213e);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            max-width: 900px;
            width: 100%;
        }
        h1 {
            text-align: center;
            color: #FFD700;
            font-size: 36px;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        .subtitle {
            text-align: center;
            color: #FFA500;
            margin-bottom: 20px;
            font-size: 14px;
        }
        #payTable {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            font-size: 12px;
        }
        .payTable-row {
            display: flex;
            justify-content: space-between;
            padding: 5px 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .payTable-row:last-child {
            border-bottom: none;
        }
        .payTable-row.highlight {
            background: rgba(255, 215, 0, 0.2);
            border: 2px solid #FFD700;
            animation: glow 0.5s ease-in-out 3;
        }
        @keyframes glow {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        .payTable-hand {
            font-weight: bold;
            color: #FFD700;
        }
        .payTable-pays {
            color: #fff;
        }
        #credits {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            font-size: 20px;
        }
        .credit-item {
            background: rgba(0, 0, 0, 0.4);
            padding: 10px 20px;
            border-radius: 10px;
            border: 2px solid #FFD700;
        }
        .credit-label {
            font-size: 14px;
            color: #FFA500;
        }
        .credit-value {
            font-size: 24px;
            color: #FFD700;
            font-weight: bold;
        }
        #cardArea {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 30px 0;
            min-height: 180px;
        }
        .card {
            width: 120px;
            height: 170px;
            background: white;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            position: relative;
        }
        .card:hover {
            transform: translateY(-10px);
        }
        .card.held {
            transform: translateY(-20px);
            border: 4px solid #FFD700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
        }
        .card.back {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            cursor: default;
        }
        .card.back:hover {
            transform: none;
        }
        .card-rank {
            font-size: 32px;
            font-weight: bold;
            position: absolute;
            top: 10px;
            left: 10px;
        }
        .card-suit {
            font-size: 64px;
        }
        .card.red {
            color: #dc143c;
        }
        .card.black {
            color: #000;
        }
        .hold-indicator {
            position: absolute;
            bottom: 5px;
            background: #FFD700;
            color: #000;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 14px;
            font-weight: bold;
        }
        #controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }
        button {
            padding: 15px 30px;
            font-size: 18px;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        #dealBtn {
            background: linear-gradient(135deg, #00ff00, #00cc00);
            color: #000;
        }
        #dealBtn:hover:not(:disabled) {
            background: linear-gradient(135deg, #00ff00, #00dd00);
            transform: scale(1.05);
        }
        #betBtn {
            background: linear-gradient(135deg, #FFA500, #FF8C00);
            color: #fff;
        }
        #betBtn:hover:not(:disabled) {
            background: linear-gradient(135deg, #FFB520, #FF9C10);
            transform: scale(1.05);
        }
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        #message {
            text-align: center;
            font-size: 24px;
            min-height: 30px;
            color: #FFD700;
            font-weight: bold;
            margin: 10px 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        #instructions {
            text-align: center;
            margin-top: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            font-size: 14px;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <h1>ðŸŽ° BONUS POKER ðŸŽ°</h1>
        <div class="subtitle">Jacks or Better to Win</div>
        
        <div id="payTable">
            <div class="payTable-row">
                <span class="payTable-hand">Royal Flush</span>
                <span class="payTable-pays">250 / 500 / 750 / 1000 / 4000</span>
            </div>
            <div class="payTable-row">
                <span class="payTable-hand">Straight Flush</span>
                <span class="payTable-pays">50 / 100 / 150 / 200 / 250</span>
            </div>
            <div class="payTable-row">
                <span class="payTable-hand">Four Aces</span>
                <span class="payTable-pays">80 / 160 / 240 / 320 / 400</span>
            </div>
            <div class="payTable-row">
                <span class="payTable-hand">Four 2-4</span>
                <span class="payTable-pays">40 / 80 / 120 / 160 / 200</span>
            </div>
            <div class="payTable-row">
                <span class="payTable-hand">Four 5-K</span>
                <span class="payTable-pays">25 / 50 / 75 / 100 / 125</span>
            </div>
            <div class="payTable-row">
                <span class="payTable-hand">Full House</span>
                <span class="payTable-pays">8 / 16 / 24 / 32 / 40</span>
            </div>
            <div class="payTable-row">
                <span class="payTable-hand">Flush</span>
                <span class="payTable-pays">5 / 10 / 15 / 20 / 25</span>
            </div>
            <div class="payTable-row">
                <span class="payTable-hand">Straight</span>
                <span class="payTable-pays">4 / 8 / 12 / 16 / 20</span>
            </div>
            <div class="payTable-row">
                <span class="payTable-hand">Three of a Kind</span>
                <span class="payTable-pays">3 / 6 / 9 / 12 / 15</span>
            </div>
            <div class="payTable-row">
                <span class="payTable-hand">Two Pair</span>
                <span class="payTable-pays">2 / 4 / 6 / 8 / 10</span>
            </div>
            <div class="payTable-row">
                <span class="payTable-hand">Jacks or Better</span>
                <span class="payTable-pays">1 / 2 / 3 / 4 / 5</span>
            </div>
        </div>

        <div id="credits">
            <div class="credit-item">
                <div class="credit-label">CREDITS</div>
                <div class="credit-value" id="creditsValue">100</div>
            </div>
            <div class="credit-item">
                <div class="credit-label">BET</div>
                <div class="credit-value" id="betValue">1</div>
            </div>
            <div class="credit-item">
                <div class="credit-label">WIN</div>
                <div class="credit-value" id="winValue">0</div>
            </div>
        </div>

        <div id="message">Place your bet and deal!</div>

        <div id="cardArea">
            <div class="card back"></div>
            <div class="card back"></div>
            <div class="card back"></div>
            <div class="card back"></div>
            <div class="card back"></div>
        </div>

        <div id="controls">
            <button id="betBtn">BET (1-5)</button>
            <button id="dealBtn">DEAL</button>
        </div>

        <div id="instructions">
            <strong>HOW TO PLAY:</strong><br>
            Click <strong>BET</strong> to adjust your wager (1-5 coins)<br>
            Click <strong>DEAL</strong> to receive your cards<br>
            Click cards to <strong>HOLD</strong> them (or click again to unhold)<br>
            Click <strong>DRAW</strong> to replace unheld cards<br>
            <br>
            <strong>Bonus Poker Features:</strong><br>
            â€¢ Four Aces pays 80:1 (at 1 coin bet)<br>
            â€¢ Four 2-4 pays 40:1 (at 1 coin bet)<br>
            â€¢ Jacks or Better minimum to win
        </div>
    </div>

    <script>
        let credits = 100;
        let bet = 1;
        let win = 0;
        let gameState = 'betting'; // betting, holding, complete
        let deck = [];
        let hand = [];
        let held = [false, false, false, false, false];

        const suits = ['â™ ', 'â™¥', 'â™¦', 'â™£'];
        const ranks = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];
        const rankValues = {
            '2': 2, '3': 3, '4': 4, '5': 5, '6': 6, '7': 7, '8': 8, '9': 9,
            '10': 10, 'J': 11, 'Q': 12, 'K': 13, 'A': 14
        };

        const dealBtn = document.getElementById('dealBtn');
        const betBtn = document.getElementById('betBtn');
        const cardElements = document.querySelectorAll('.card');
        const messageEl = document.getElementById('message');

        function createDeck() {
            deck = [];
            for (let suit of suits) {
                for (let rank of ranks) {
                    deck.push({ rank, suit });
                }
            }
            shuffleDeck();
        }

        function shuffleDeck() {
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }
        }

        function dealHand() {
            hand = [];
            for (let i = 0; i < 5; i++) {
                hand.push(deck.pop());
            }
            held = [false, false, false, false, false];
        }

        function drawCards() {
            for (let i = 0; i < 5; i++) {
                if (!held[i]) {
                    hand[i] = deck.pop();
                }
            }
        }

        function displayCards() {
            cardElements.forEach((cardEl, i) => {
                if (hand[i]) {
                    const card = hand[i];
                    const isRed = card.suit === 'â™¥' || card.suit === 'â™¦';
                    cardEl.className = `card ${isRed ? 'red' : 'black'}`;
                    if (held[i]) {
                        cardEl.classList.add('held');
                    }
                    
                    cardEl.innerHTML = `
                        <div class="card-rank">${card.rank}</div>
                        <div class="card-suit">${card.suit}</div>
                        ${held[i] ? '<div class="hold-indicator">HELD</div>' : ''}
                    `;
                } else {
                    cardEl.className = 'card back';
                    cardEl.innerHTML = '';
                }
            });
        }

        function evaluateHand() {
            const sortedHand = [...hand].sort((a, b) => rankValues[a.rank] - rankValues[b.rank]);
            const rankCounts = {};
            const suitCounts = {};
            
            sortedHand.forEach(card => {
                rankCounts[card.rank] = (rankCounts[card.rank] || 0) + 1;
                suitCounts[card.suit] = (suitCounts[card.suit] || 0) + 1;
            });

            const counts = Object.values(rankCounts).sort((a, b) => b - a);
            const isFlush = Object.values(suitCounts).includes(5);
            
            // Check for straight
            let isStraight = false;
            const values = sortedHand.map(card => rankValues[card.rank]);
            if (values[4] - values[0] === 4 && new Set(values).size === 5) {
                isStraight = true;
            }
            // Check for A-2-3-4-5 (wheel)
            if (values[0] === 2 && values[1] === 3 && values[2] === 4 && values[3] === 5 && values[4] === 14) {
                isStraight = true;
            }

            const isRoyal = isStraight && isFlush && 
                           sortedHand[0].rank === '10' && sortedHand[4].rank === 'A';

            // Royal Flush
            if (isRoyal) {
                return { hand: 'Royal Flush', payout: [250, 500, 750, 1000, 4000] };
            }

            // Straight Flush
            if (isStraight && isFlush) {
                return { hand: 'Straight Flush', payout: [50, 100, 150, 200, 250] };
            }

            // Four of a Kind (with Bonus Poker bonuses)
            if (counts[0] === 4) {
                const fourRank = Object.keys(rankCounts).find(rank => rankCounts[rank] === 4);
                if (fourRank === 'A') {
                    return { hand: 'Four Aces', payout: [80, 160, 240, 320, 400] };
                } else if (['2', '3', '4'].includes(fourRank)) {
                    return { hand: 'Four 2-4', payout: [40, 80, 120, 160, 200] };
                } else {
                    return { hand: 'Four 5-K', payout: [25, 50, 75, 100, 125] };
                }
            }

            // Full House
            if (counts[0] === 3 && counts[1] === 2) {
                return { hand: 'Full House', payout: [8, 16, 24, 32, 40] };
            }

            // Flush
            if (isFlush) {
                return { hand: 'Flush', payout: [5, 10, 15, 20, 25] };
            }

            // Straight
            if (isStraight) {
                return { hand: 'Straight', payout: [4, 8, 12, 16, 20] };
            }

            // Three of a Kind
            if (counts[0] === 3) {
                return { hand: 'Three of a Kind', payout: [3, 6, 9, 12, 15] };
            }

            // Two Pair
            if (counts[0] === 2 && counts[1] === 2) {
                return { hand: 'Two Pair', payout: [2, 4, 6, 8, 10] };
            }

            // Jacks or Better
            if (counts[0] === 2) {
                const pairRank = Object.keys(rankCounts).find(rank => rankCounts[rank] === 2);
                if (['J', 'Q', 'K', 'A'].includes(pairRank)) {
                    return { hand: 'Jacks or Better', payout: [1, 2, 3, 4, 5] };
                }
            }

            return { hand: 'No Win', payout: [0, 0, 0, 0, 0] };
        }

        function highlightPayTable(handName) {
            document.querySelectorAll('.payTable-row').forEach(row => {
                row.classList.remove('highlight');
                if (row.querySelector('.payTable-hand').textContent === handName) {
                    row.classList.add('highlight');
                }
            });
        }

        function updateDisplay() {
            document.getElementById('creditsValue').textContent = credits;
            document.getElementById('betValue').textContent = bet;
            document.getElementById('winValue').textContent = win;
        }

        betBtn.addEventListener('click', () => {
            if (gameState === 'betting') {
                bet = (bet % 5) + 1;
                updateDisplay();
                messageEl.textContent = `Bet ${bet} coin${bet > 1 ? 's' : ''} - Click DEAL`;
            }
        });

        dealBtn.addEventListener('click', () => {
            if (gameState === 'betting') {
                if (credits < bet) {
                    messageEl.textContent = 'Not enough credits!';
                    return;
                }
                
                credits -= bet;
                win = 0;
                createDeck();
                dealHand();
                displayCards();
                gameState = 'holding';
                dealBtn.textContent = 'DRAW';
                betBtn.disabled = true;
                messageEl.textContent = 'Select cards to HOLD, then click DRAW';
                updateDisplay();
                
            } else if (gameState === 'holding') {
                drawCards();
                displayCards();
                
                const result = evaluateHand();
                const winAmount = result.payout[bet - 1];
                
                if (winAmount > 0) {
                    win = winAmount;
                    credits += winAmount;
                    messageEl.textContent = `${result.hand}! You win ${winAmount} credits!`;
                    highlightPayTable(result.hand);
                } else {
                    messageEl.textContent = 'No win. Better luck next time!';
                    document.querySelectorAll('.payTable-row').forEach(row => {
                        row.classList.remove('highlight');
                    });
                }
                
                gameState = 'complete';
                dealBtn.textContent = 'DEAL';
                updateDisplay();
                
                setTimeout(() => {
                    gameState = 'betting';
                    betBtn.disabled = false;
                    held = [false, false, false, false, false];
                    messageEl.textContent = 'Place your bet and deal!';
                    document.querySelectorAll('.payTable-row').forEach(row => {
                        row.classList.remove('highlight');
                    });
                    
                    // Reset display to card backs
                    hand = [];
                    displayCards();
                }, 3000);
            }
        });

        cardElements.forEach((cardEl, i) => {
            cardEl.addEventListener('click', () => {
                if (gameState === 'holding' && hand[i]) {
                    held[i] = !held[i];
                    displayCards();
                }
            });
        });

        // Initialize
        updateDisplay();
        displayCards();
    </script>
</body>
</html>