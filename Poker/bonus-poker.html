<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bonus Poker - Video Poker</title>
<style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
        font-family: 'Arial', sans-serif; 
        background: linear-gradient(135deg, #1a0033 0%, #330066 100%);
        color: white; 
        height: 100vh; 
        display: flex; 
        flex-direction: column;
        overflow: hidden;
    }
    
    /* MOBILE RESPONSIVE */
    @media (max-width: 768px) {
        .top-bar { padding: 8px !important; }
        h1 { font-size: 18px !important; }
        .credits-display { font-size: 16px !important; }
        
        .paytable {
            font-size: 9px !important;
            padding: 8px !important;
        }
        .paytable-row { padding: 3px 5px !important; }
        
        .card { 
            width: 60px !important; 
            height: 84px !important;
            font-size: 20px !important;
        }
        .card-rank { font-size: 16px !important; }
        .card-suit { font-size: 20px !important; }
        .hold-badge { 
            font-size: 10px !important;
            padding: 3px 8px !important;
        }
        
        .controls button {
            padding: 10px 15px !important;
            font-size: 14px !important;
        }
        
        .bet-controls button {
            padding: 8px 12px !important;
            font-size: 12px !important;
        }
        
        .win-display { font-size: 20px !important; }
    }
    
    @media (max-width: 480px) {
        h1 { font-size: 16px !important; }
        .credits-display { font-size: 14px !important; }
        
        .card { 
            width: 50px !important; 
            height: 70px !important;
            font-size: 16px !important;
        }
        .card-rank { font-size: 14px !important; }
        .card-suit { font-size: 16px !important; }
        
        .paytable {
            font-size: 8px !important;
            padding: 5px !important;
        }
        
        .controls button {
            padding: 8px 12px !important;
            font-size: 12px !important;
        }
    }
    
    /* TOP BAR */
    .top-bar {
        background: rgba(0,0,0,0.9);
        padding: 15px 30px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 3px solid #FFD700;
    }
    
    h1 {
        font-size: 24px;
        color: #FFD700;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }
    
    .credits-display {
        font-size: 20px;
        font-weight: bold;
        color: #00ff00;
        background: rgba(0,0,0,0.5);
        padding: 8px 20px;
        border-radius: 8px;
        border: 2px solid #00ff00;
    }
    
    /* PAYTABLE */
    .paytable-container {
        background: rgba(0,0,0,0.7);
        padding: 15px;
        margin: 10px;
        border-radius: 10px;
        border: 2px solid #FFD700;
    }
    
    .paytable {
        display: grid;
        grid-template-columns: 2fr repeat(5, 1fr);
        gap: 2px;
        font-size: 11px;
        font-weight: bold;
    }
    
    .paytable-header {
        background: #660099;
        padding: 5px;
        text-align: center;
        border-radius: 4px;
        color: #FFD700;
    }
    
    .paytable-row {
        display: contents;
    }
    
    .paytable-row > div {
        background: rgba(255,255,255,0.1);
        padding: 5px 8px;
        text-align: center;
        border-radius: 3px;
    }
    
    .paytable-row.highlight > div {
        background: #FFD700;
        color: #000;
        font-weight: bold;
        animation: pulse 0.5s ease-in-out;
    }
    
    .hand-name {
        text-align: left !important;
        padding-left: 10px !important;
    }
    
    /* GAME AREA */
    .game-container {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 20px;
        gap: 20px;
    }
    
    /* WIN DISPLAY */
    .win-display {
        min-height: 40px;
        font-size: 24px;
        font-weight: bold;
        color: #FFD700;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        animation: glow 1s ease-in-out infinite;
    }
    
    @keyframes glow {
        0%, 100% { text-shadow: 2px 2px 4px rgba(0,0,0,0.8), 0 0 10px #FFD700; }
        50% { text-shadow: 2px 2px 4px rgba(0,0,0,0.8), 0 0 20px #FFD700, 0 0 30px #FFD700; }
    }
    
    /* CARDS */
    .cards-row {
        display: flex;
        gap: 10px;
        perspective: 1000px;
    }
    
    .card-wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
    }
    
    .card {
        width: 80px;
        height: 112px;
        background: white;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.5);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s;
        position: relative;
        user-select: none;
    }
    
    .card:hover {
        transform: translateY(-10px);
        box-shadow: 0 8px 16px rgba(0,0,0,0.7);
    }
    
    .card.held {
        border: 4px solid #FFD700;
        box-shadow: 0 0 20px #FFD700;
    }
    
    .card-rank {
        font-size: 20px;
        font-weight: bold;
        margin-bottom: 5px;
    }
    
    .card-suit {
        font-size: 24px;
    }
    
    .card.red {
        color: #d00;
    }
    
    .card.black {
        color: #000;
    }
    
    .card-back {
        background: linear-gradient(135deg, #1a0066 0%, #4400cc 100%);
        background-image: repeating-linear-gradient(45deg, #3300aa 0px, #3300aa 10px, #1a0066 10px, #1a0066 20px);
        color: white;
        font-size: 24px;
        border: 3px solid #FFD700;
    }
    
    .hold-badge {
        background: #FFD700;
        color: #000;
        font-weight: bold;
        font-size: 12px;
        padding: 4px 10px;
        border-radius: 20px;
        visibility: hidden;
    }
    
    .hold-badge.show {
        visibility: visible;
    }
    
    /* CONTROLS */
    .controls {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
        justify-content: center;
    }
    
    .controls button {
        padding: 12px 24px;
        font-size: 16px;
        font-weight: bold;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s;
        box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }
    
    .btn-deal {
        background: linear-gradient(135deg, #00cc00 0%, #008800 100%);
        color: white;
        border: 2px solid #00ff00;
    }
    
    .btn-deal:hover {
        background: linear-gradient(135deg, #00ff00 0%, #00cc00 100%);
        transform: scale(1.05);
    }
    
    .btn-deal:disabled {
        background: #555;
        cursor: not-allowed;
        opacity: 0.5;
    }
    
    .bet-controls {
        display: flex;
        gap: 10px;
        align-items: center;
    }
    
    .bet-controls button {
        padding: 10px 16px;
        font-size: 14px;
        font-weight: bold;
        background: linear-gradient(135deg, #0066cc 0%, #004488 100%);
        color: white;
        border: 2px solid #0088ff;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.3s;
    }
    
    .bet-controls button:hover {
        background: linear-gradient(135deg, #0088ff 0%, #0066cc 100%);
        transform: scale(1.05);
    }
    
    .bet-display {
        font-size: 18px;
        font-weight: bold;
        color: #FFD700;
        background: rgba(0,0,0,0.5);
        padding: 8px 16px;
        border-radius: 6px;
        border: 2px solid #FFD700;
        min-width: 100px;
        text-align: center;
    }
    
    @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
    }
</style>
</head>
<body>
    <div class="top-bar">
        <h1>ðŸŽ° BONUS POKER</h1>
        <div class="credits-display">CREDITS: <span id="credits">1000</span></div>
    </div>
    
    <div class="paytable-container">
        <div class="paytable">
            <div class="paytable-header">HAND</div>
            <div class="paytable-header">1 COIN</div>
            <div class="paytable-header">2 COINS</div>
            <div class="paytable-header">3 COINS</div>
            <div class="paytable-header">4 COINS</div>
            <div class="paytable-header">5 COINS</div>
            
            <div class="paytable-row" data-hand="royal">
                <div class="hand-name">Royal Flush</div>
                <div>250</div><div>500</div><div>750</div><div>1000</div><div>4000</div>
            </div>
            
            <div class="paytable-row" data-hand="straight-flush">
                <div class="hand-name">Straight Flush</div>
                <div>50</div><div>100</div><div>150</div><div>200</div><div>250</div>
            </div>
            
            <div class="paytable-row" data-hand="four-aces">
                <div class="hand-name">Four Aces</div>
                <div>80</div><div>160</div><div>240</div><div>320</div><div>400</div>
            </div>
            
            <div class="paytable-row" data-hand="four-2-4">
                <div class="hand-name">Four 2-4</div>
                <div>40</div><div>80</div><div>120</div><div>160</div><div>200</div>
            </div>
            
            <div class="paytable-row" data-hand="four-5-k">
                <div class="hand-name">Four 5-K</div>
                <div>25</div><div>50</div><div>75</div><div>100</div><div>125</div>
            </div>
            
            <div class="paytable-row" data-hand="full-house">
                <div class="hand-name">Full House</div>
                <div>8</div><div>16</div><div>24</div><div>32</div><div>40</div>
            </div>
            
            <div class="paytable-row" data-hand="flush">
                <div class="hand-name">Flush</div>
                <div>5</div><div>10</div><div>15</div><div>20</div><div>25</div>
            </div>
            
            <div class="paytable-row" data-hand="straight">
                <div class="hand-name">Straight</div>
                <div>4</div><div>8</div><div>12</div><div>16</div><div>20</div>
            </div>
            
            <div class="paytable-row" data-hand="three">
                <div class="hand-name">Three of a Kind</div>
                <div>3</div><div>6</div><div>9</div><div>12</div><div>15</div>
            </div>
            
            <div class="paytable-row" data-hand="two-pair">
                <div class="hand-name">Two Pair</div>
                <div>2</div><div>4</div><div>6</div><div>8</div><div>10</div>
            </div>
            
            <div class="paytable-row" data-hand="jacks">
                <div class="hand-name">Jacks or Better</div>
                <div>1</div><div>2</div><div>3</div><div>4</div><div>5</div>
            </div>
        </div>
    </div>
    
    <div class="game-container">
        <div class="win-display" id="winDisplay"></div>
        
        <div class="cards-row" id="cardsRow">
            <!-- Cards will be generated here -->
        </div>
        
        <div class="controls">
            <div class="bet-controls">
                <button onclick="decreaseBet()">BET -</button>
                <div class="bet-display">BET: <span id="betAmount">5</span></div>
                <button onclick="increaseBet()">BET +</button>
                <button onclick="maxBet()">MAX BET</button>
            </div>
            <button class="btn-deal" id="dealBtn" onclick="dealDraw()">DEAL</button>
        </div>
    </div>

<script>
const SUITS = ['â™ ', 'â™¥', 'â™¦', 'â™£'];
const RANKS = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];
const RANK_VALUES = {
    '2': 2, '3': 3, '4': 4, '5': 5, '6': 6, '7': 7, '8': 8, '9': 9,
    '10': 10, 'J': 11, 'Q': 12, 'K': 13, 'A': 14
};

let credits = 1000;
let bet = 5;
let hand = [];
let held = [false, false, false, false, false];
let gameState = 'READY'; // READY, DEALT, DRAW

const PAYTABLE = {
    'royal': [250, 500, 750, 1000, 4000],
    'straight-flush': [50, 100, 150, 200, 250],
    'four-aces': [80, 160, 240, 320, 400],
    'four-2-4': [40, 80, 120, 160, 200],
    'four-5-k': [25, 50, 75, 100, 125],
    'full-house': [8, 16, 24, 32, 40],
    'flush': [5, 10, 15, 20, 25],
    'straight': [4, 8, 12, 16, 20],
    'three': [3, 6, 9, 12, 15],
    'two-pair': [2, 4, 6, 8, 10],
    'jacks': [1, 2, 3, 4, 5]
};

function createDeck() {
    const deck = [];
    for (let suit of SUITS) {
        for (let rank of RANKS) {
            deck.push({ rank, suit });
        }
    }
    return deck;
}

function shuffle(deck) {
    for (let i = deck.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [deck[i], deck[j]] = [deck[j], deck[i]];
    }
    return deck;
}

function dealDraw() {
    if (gameState === 'READY') {
        // Initial deal
        if (credits < bet) {
            document.getElementById('winDisplay').textContent = 'INSUFFICIENT CREDITS!';
            return;
        }
        
        credits -= bet;
        updateCredits();
        
        const deck = shuffle(createDeck());
        hand = deck.slice(0, 5);
        held = [false, false, false, false, false];
        gameState = 'DEALT';
        
        document.getElementById('dealBtn').textContent = 'DRAW';
        document.getElementById('winDisplay').textContent = 'SELECT CARDS TO HOLD';
        
        renderCards();
    } else if (gameState === 'DEALT') {
        // Draw
        const deck = shuffle(createDeck());
        let deckIndex = 0;
        
        for (let i = 0; i < 5; i++) {
            if (!held[i]) {
                hand[i] = deck[deckIndex++];
            }
        }
        
        gameState = 'DRAW';
        document.getElementById('dealBtn').textContent = 'DEAL';
        
        renderCards();
        evaluateHand();
    }
}

function renderCards() {
    const cardsRow = document.getElementById('cardsRow');
    cardsRow.innerHTML = '';
    
    for (let i = 0; i < 5; i++) {
        const wrapper = document.createElement('div');
        wrapper.className = 'card-wrapper';
        
        const card = document.createElement('div');
        card.className = `card ${(['â™¥', 'â™¦'].includes(hand[i].suit)) ? 'red' : 'black'}`;
        
        if (held[i]) {
            card.classList.add('held');
        }
        
        if (gameState === 'DEALT') {
            card.onclick = () => toggleHold(i);
        }
        
        const rankDiv = document.createElement('div');
        rankDiv.className = 'card-rank';
        rankDiv.textContent = hand[i].rank;
        
        const suitDiv = document.createElement('div');
        suitDiv.className = 'card-suit';
        suitDiv.textContent = hand[i].suit;
        
        card.appendChild(rankDiv);
        card.appendChild(suitDiv);
        
        const holdBadge = document.createElement('div');
        holdBadge.className = `hold-badge ${held[i] ? 'show' : ''}`;
        holdBadge.textContent = 'HELD';
        
        wrapper.appendChild(card);
        wrapper.appendChild(holdBadge);
        cardsRow.appendChild(wrapper);
    }
}

function toggleHold(index) {
    if (gameState === 'DEALT') {
        held[index] = !held[index];
        renderCards();
    }
}

function evaluateHand() {
    const result = analyzeHand(hand);
    
    // Clear all highlights
    document.querySelectorAll('.paytable-row').forEach(row => {
        row.classList.remove('highlight');
    });
    
    if (result.type !== 'nothing') {
        const payout = PAYTABLE[result.type][bet - 1];
        credits += payout;
        updateCredits();
        
        document.getElementById('winDisplay').textContent = `${result.name.toUpperCase()} - WIN ${payout} CREDITS!`;
        
        // Highlight paytable
        const row = document.querySelector(`.paytable-row[data-hand="${result.type}"]`);
        if (row) {
            row.classList.add('highlight');
        }
    } else {
        document.getElementById('winDisplay').textContent = 'NO WIN';
    }
    
    gameState = 'READY';
    held = [false, false, false, false, false];
}

function analyzeHand(cards) {
    const ranks = cards.map(c => c.rank);
    const suits = cards.map(c => c.suit);
    const rankCounts = {};
    
    for (let rank of ranks) {
        rankCounts[rank] = (rankCounts[rank] || 0) + 1;
    }
    
    const counts = Object.values(rankCounts).sort((a, b) => b - a);
    const isFlush = suits.every(s => s === suits[0]);
    const sortedValues = ranks.map(r => RANK_VALUES[r]).sort((a, b) => a - b);
    const isStraight = sortedValues.every((v, i) => i === 0 || v === sortedValues[i - 1] + 1) ||
                      (sortedValues.join(',') === '2,3,4,5,14'); // A-2-3-4-5
    
    const isRoyal = isStraight && isFlush && sortedValues[0] === 10;
    
    // Royal Flush
    if (isRoyal) {
        return { type: 'royal', name: 'Royal Flush' };
    }
    
    // Straight Flush
    if (isStraight && isFlush) {
        return { type: 'straight-flush', name: 'Straight Flush' };
    }
    
    // Four of a Kind - Bonus Poker special payouts
    if (counts[0] === 4) {
        const fourRank = Object.keys(rankCounts).find(r => rankCounts[r] === 4);
        if (fourRank === 'A') {
            return { type: 'four-aces', name: 'Four Aces' };
        } else if (['2', '3', '4'].includes(fourRank)) {
            return { type: 'four-2-4', name: 'Four 2-4' };
        } else {
            return { type: 'four-5-k', name: 'Four 5-K' };
        }
    }
    
    // Full House
    if (counts[0] === 3 && counts[1] === 2) {
        return { type: 'full-house', name: 'Full House' };
    }
    
    // Flush
    if (isFlush) {
        return { type: 'flush', name: 'Flush' };
    }
    
    // Straight
    if (isStraight) {
        return { type: 'straight', name: 'Straight' };
    }
    
    // Three of a Kind
    if (counts[0] === 3) {
        return { type: 'three', name: 'Three of a Kind' };
    }
    
    // Two Pair
    if (counts[0] === 2 && counts[1] === 2) {
        return { type: 'two-pair', name: 'Two Pair' };
    }
    
    // Jacks or Better
    if (counts[0] === 2) {
        const pairRank = Object.keys(rankCounts).find(r => rankCounts[r] === 2);
        if (['J', 'Q', 'K', 'A'].includes(pairRank)) {
            return { type: 'jacks', name: 'Jacks or Better' };
        }
    }
    
    return { type: 'nothing', name: 'Nothing' };
}

function increaseBet() {
    if (gameState === 'READY' && bet < 5) {
        bet++;
        updateBet();
    }
}

function decreaseBet() {
    if (gameState === 'READY' && bet > 1) {
        bet--;
        updateBet();
    }
}

function maxBet() {
    if (gameState === 'READY') {
        bet = 5;
        updateBet();
    }
}

function updateBet() {
    document.getElementById('betAmount').textContent = bet;
}

function updateCredits() {
    document.getElementById('credits').textContent = credits;
}
</script>
</body>
</html>
